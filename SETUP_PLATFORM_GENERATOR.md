# Инструкция по настройке PlatformGenerator

## ✅ Найдено в проекте:

1. **Префабы камней:** `Assets/Prefabs/Rocks/` - 16 префабов (Rock_1 до Rock_16) уже созданы!
2. **Текстуры для камней:** `Assets/Materials/rocky_terrain_02_4k.blend/textures/` - найдены все текстуры!
3. **Текстуры для деревьев:** `Assets/Tree_Textures/` - все текстуры найдены и GUID совпадают!

## Проблемы и решения

### Проблема 1: Деревья розовые (без текстуры)
**Причина:** Проект использует **Universal Render Pipeline (URP)**, а Unity Tree система использует встроенные шейдеры (10604, 10605), которые **НЕ РАБОТАЮТ** с URP! Это основная причина розового цвета.

**Решение (автоматическое - РЕКОМЕНДУЕТСЯ):**
1. Откройте префаб `Assets/Prefabs/v002/PlatformGenerator.prefab`
2. В инспекторе найдите компонент `Platform Generator`
3. Нажмите кнопку **"Исправить материалы дерева для URP"**
4. Система автоматически:
   - Создаст URP-совместимые материалы для коры и листьев
   - Применит текстуры из `Assets/Tree_Textures/`
   - Обновит префаб `Tree.prefab`
5. Сохраните префаб (Ctrl+S / Cmd+S)

**Важно:** Unity Tree компонент может все еще не работать с URP. Если проблема сохраняется, возможно нужно:
- Использовать обычные GameObjects вместо Unity Tree компонента
- Или переключиться на Built-in Render Pipeline (не рекомендуется, так как проект настроен на URP)

### Проблема 2: Камни розовые (без текстур)
**Причина:** Префабы камней уже созданы, но используют стандартный материал Unity без текстур или несовместимый шейдер.

**Решение (автоматическое - РЕКОМЕНДУЕТСЯ):**
1. Откройте префаб `Assets/Prefabs/v002/PlatformGenerator.prefab`
2. В инспекторе найдите компонент `Platform Generator`
3. Внизу компонента нажмите кнопку **"Применить материалы к префабам камней"**
4. Система автоматически:
   - Создаст URP-совместимый материал `RockMaterial` из текстур `rocky_terrain_02`
   - Применит его ко всем 16 префабам камней
5. Сохраните префаб (Ctrl+S / Cmd+S)

**Если камни все еще розовые:**
- Убедитесь, что Universal Render Pipeline установлен в проекте
- Проверьте, что шейдер "Universal Render Pipeline/Lit" доступен

**Решение для заполнения массива Rock Prefabs:**
1. В инспекторе `PlatformGenerator` нажмите **"Автоматически заполнить Rock Prefabs"**
2. Система найдет все префабы в `Assets/Prefabs/Rocks/` и заполнит массив
3. Сохраните префаб

## Настройка PlatformGenerator

### Шаг 1: Откройте префаб
- Перейдите в `Assets/Prefabs/v002/PlatformGenerator.prefab`
- Или найдите объект `PlatformGenerator` в сцене

### Шаг 2: Заполните Tree Prefabs
**Автоматически:**
- Нажмите кнопку **"Автоматически заполнить Tree Prefabs"** в инспекторе
- Система найдет `Tree.prefab` и заполнит все 5 слотов

**Вручную:**
- Найдите поле `Tree Prefabs` (размер массива = 5)
- Перетащите `Assets/Tree.prefab` во все 5 слотов

### Шаг 3: Заполните Rock Prefabs
**Автоматически (рекомендуется):**
- Нажмите кнопку **"Автоматически заполнить Rock Prefabs"**
- Выберите "Да, создать" для создания простых префабов

**Вручную:**
- Найдите поле `Rock Prefabs` (размер массива = 16)
- Перетащите префабы камней в слоты

### Шаг 4: Проверьте другие настройки
- `Platform Size` = 1000 (размер платформы)
- `Load Radius` = 2-3 (радиус загрузки платформ)
- `Platform Material` - должен быть назначен материал для платформ

## Проверка работы

После настройки:
1. Запустите игру
2. Проверьте консоль - должны быть сообщения:
   - "Заполнено X из 5 префабов деревьев"
   - "Заполнено X из 16 префабов камней"
   - "Платформа (X, Y): найдено N деревьев"
3. Пролетите над платформами - должны появиться деревья и камни

## Отладка

### Деревья не появляются или без текстуры:
1. Проверьте консоль на предупреждения о префабах
2. Убедитесь, что `Tree.prefab` существует и не поврежден
3. Проверьте, что текстуры в `Assets/Tree_Textures/` не повреждены
4. Попробуйте пересоздать префаб дерева

### Камни не появляются:
1. Проверьте консоль - должно быть предупреждение "Нет префабов камней!"
2. Убедитесь, что массив `Rock Prefabs` заполнен (используйте кнопку автоматического заполнения)
3. Проверьте, что префабы камней не null

### Общие проблемы:
1. Убедитесь, что `PlatformGenerator` активен в сцене
2. Проверьте, что камера или корабль находятся в пределах `loadRadius` от платформ
3. Проверьте консоль на ошибки и предупреждения
